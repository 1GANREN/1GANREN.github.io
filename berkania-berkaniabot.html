async function updateServerStatus() {
    try {
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
        playerListElement.innerHTML = '<div class="loading"><i class="fas fa-spinner"></i><p>–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –∏–≥—Ä–æ–∫–æ–≤...</p></div>';
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ IP –∏–∑ —Ñ–∞–π–ª–∞ ip.txt
        const ipResponse = await fetch("ip.txt");
        if (!ipResponse.ok) throw new Error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ IP");
        const ip = (await ipResponse.text()).trim();
        
        // –û–±–Ω–æ–≤–ª—è–µ–º IP
        serverIpElement.textContent = ip;
        
        // –ó–∞–ø—Ä–æ—Å –∫ API —Å–µ—Ä–≤–µ—Ä–∞ Minecraft
        const response = await fetch(`https://api.mcsrvstat.us/2/${ip}`, { mode: 'cors' });
        if (!response.ok) throw new Error("–û—à–∏–±–∫–∞ API");
        const data = await response.json();
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
        if (data.online) {
            // –°–µ—Ä–≤–µ—Ä –æ–Ω–ª–∞–π–Ω
            serverStatusElement.textContent = 'üü¢ –û–Ω–ª–∞–π–Ω';
            serverStatusElement.className = 'info-value status-online';
            
            // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–æ–≤
            const onlinePlayers = data.players?.online || 0;
            const maxPlayers = data.players?.max || 20;
            
            playersCountElement.textContent = `${onlinePlayers}/${maxPlayers}`;
            playersCountValueElement.textContent = onlinePlayers;
            
            // –°–æ–∑–¥–∞–µ–º —Å–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤
            playerListElement.innerHTML = '';
            
            if (onlinePlayers > 0 && data.players.list) {
                // –ë–æ–ª–µ–µ –º—è–≥–∫–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏–≥—Ä–æ–∫–æ–≤
                const realPlayers = data.players.list.filter(player => {
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ player - —Å—Ç—Ä–æ–∫–∞ (–∞ –Ω–µ –æ–±—ä–µ–∫—Ç)
                    if (typeof player !== 'string') return false;
                    
                    // –ò—Å–∫–ª—é—á–∞–µ–º —è–≤–Ω—ã–µ UUID –∏ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–µ –∏–º–µ–Ω–∞ (–±–æ–ª–µ–µ 16 —Å–∏–º–≤–æ–ª–æ–≤)
                    if (player.length > 16 || player.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i)) {
                        return false;
                    }
                    
                    return true;
                });
                
                if (realPlayers.length > 0) {
                    realPlayers.forEach(player => {
                        const playerCard = document.createElement('div');
                        playerCard.className = 'player-card';
                        playerCard.innerHTML = `
                            <div class="player-icon">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="player-name">${player}</div>
                        `;
                        playerListElement.appendChild(playerCard);
                    });
                } else {
                    playerListElement.innerHTML = '<div class="no-players"><i class="fas fa-user-slash"></i><p>–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤</p></div>';
                }
            } else {
                playerListElement.innerHTML = '<div class="no-players"><i class="fas fa-user-slash"></i><p>–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω–µ—Ç –∏–≥—Ä–æ–∫–æ–≤</p></div>';
            }
        } else {
            // –°–µ—Ä–≤–µ—Ä –æ—Ñ—Ñ–ª–∞–π–Ω
            serverStatusElement.textContent = 'üî¥ –û—Ñ—Ñ–ª–∞–π–Ω';
            serverStatusElement.className = 'info-value status-offline';
            playersCountElement.textContent = '0/20';
            playersCountValueElement.textContent = '0';
            playerListElement.innerHTML = '<div class="server-offline"><i class="fas fa-plug"></i><p>–°–µ—Ä–≤–µ—Ä –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω</p></div>';
        }
    } catch (error) {
        console.error("–û—à–∏–±–∫–∞:", error);
        serverStatusElement.textContent = 'üî¥ –û—à–∏–±–∫–∞';
        serverStatusElement.className = 'info-value status-offline';
        playersCountElement.textContent = '0/20';
        playersCountValueElement.textContent = '0';
        playerListElement.innerHTML = '<div class="server-offline"><i class="fas fa-exclamation-triangle"></i><p>–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä–∞</p></div>';
    }
}
